#textdomain wesnoth-anh

# TODO:
# 1 - Ven sollte sich überall verstecken können
# 2 - Verstecke die Orks am Ende de Szenarios
#
#

[scenario]
    id=04_fog_of_war
    name= _ "Fog of War"
    map_data="{~add-ons/A_New_Home/maps/04_fog_of_war.map}"
    turns=30
    victory_when_enemies_defeated=no
    next_scenario=05_kor_mahzgur
    
    {DEFAULT_SCHEDULE}
    {ANH_PLAYLIST_FLEE}
    
    # M A C R O S
    
#define PLACE_HIDEOUT ID X Y CAN_PLACE_FILTER_WML IMAGE   
    # An example wich shows the:
    # ! {PLACE_HIDEOUT hideout_1 13 20 side=1 items/gohere.png}

    [item]
        x,y={X},{Y}
        image={IMAGE}
    [/item]
    
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x={X}
            y={Y}
        [/filter]
            
        [if]
            [have_unit]
                x={X}
                y={Y}
                {CAN_PLACE_FILTER_WML}
            [/have_unit]

            [variable]
                name=hideout_{ID}_used
                not_equals=yes
            [/variable]
            
            [then]
                
                {HIDE_UNIT_DIALOQUES {X} {Y}}
                               
                [remove_item]
                    x,y={X},{Y}
                    image={IMAGE}
                [/remove_item]
        
                [set_variable]
                    name=hideout_{ID}_used
                    value=yes
                [/set_variable]
                
                [store_unit]
		       		variable={ID}_unit_store
		       		kill=yes
		       		[filter]
                        x={X}
                        y={Y}
                    [/filter]
		   		[/store_unit]
		   		
		   		{VARIABLE_OP units_hidden add 1}
            [/then]
            [else]
                [if]
                    [variable]
                        name=hideout_{ID}_used
                        not_equals=yes
                    [/variable]
                
                    [then]
                        [message]
                            speaker=unit
                            message= _ "Ich muss den anderen helfen, ich darf mich noch nicht verstecken!"
                            side_for=$side_number
                        [/message] 
                    [/then]
                [/if]
                [allow_undo]
                [/allow_undo]
            [/else]
        [/if]       
    [/event]
    
    [event]
        name=victory

        
		[if]
			[variable]
				name=hideout_{ID}_used
				equals=yes
			[/variable]
			[then]
				#set units position
				{VARIABLE {ID}_unit_store.x {X}}
				{VARIABLE {ID}_unit_store.y {Y}}
					
				#show unit
				[unstore_unit]
					variable={ID}_unit_store
					find_vacant=yes
				[/unstore_unit]
				{CLEAR_VARIABLE {ID}_unit_store}
			[/then]
		[/if]
        
		
		[clear_variable]
            name=hideout_{ID}_used
		[/clear_variable]
		
        [redraw]
        [/redraw]
    [/event]
#enddef

#define HIDE_UNIT_DIALOQUES X Y
	
	# Denvan
	[if]
		[have_unit]
			id=Denvan
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Das scheint ideal zu sein."
			[/message]
		[/then]
	[/if]
	
	# Lenvan
	[if]
		[have_unit]
			id=Lenvan
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Wenn hier ein Ork vorbeikommt, schnappe ich ihn mir trotzdem!"
			[/message]
		[/then]
	[/if]
	
	# Ysedda
	[if]
		[have_unit]
			id=Ysedda
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Ich hoffe, die anderen finden auch so gute Verstecke."
			[/message]
		[/then]
	[/if]
	
	# Brealla
	[if]
		[have_unit]
			id=Brealla
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Hätte ich das nicht gefunden, hätte ich mir selbst ein Versteck geschaffen."
			[/message]
		[/then]
	[/if]
	
	# Ven
	[if]
		[have_unit]
			id=Ven
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Verstecke gibt es überall."
			[/message]
		[/then]
	[/if]
	
	# Johan
	[if]
		[have_unit]
			id=Johan
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Ich fühle mich nicht wohl dabei, die anderen alleine lassen zu müssen."
			[/message]
		[/then]
	[/if]
	
	# Gweod
	[if]
		[have_unit]
			id=Gweod
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Mist, hier ist nicht genug Platz für mehr als eine Person. Ich werde mich wohl alleine hier verstecken müssen."
			[/message]
		[/then]
	[/if]
	
	# Petar
	[if]
		[have_unit]
			id=Petar
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Etwas eng mit der Rüstung, aber das bekomme ich schon hin. Es ist schließlich nicht das erste Mal, dass ich mich verstecken muss. Natürlich, normalerweise für Hinterhalte, aber wenn es für das größere Wohl nötig ist, dann kann ich mich auch einmal vom Kampf fern halten. Und dieser Wald ist dafür nicht der schlechteste Ort."
			[/message]
			[message]
				speaker=unit
				message="Der Nebel lässt einen zwar nicht viel sehen, aber das was man sehen kann ist doch entspannend. Ich spüre geradezu, wie der Stress den man im Dorf immer ausgesetzt ist von mir abfällt. Und der Stress von der Verfolgung natürlich. Die Rüstung ist nicht unbedingt für lange Märsche geschaffen. Hier kommt sie mir fast nutzlos vor, die Orks werden mich nicht finden und ich bin sicher, es gibt in diesem Wald keine großen Raubtiere."
			[/message]
			[message]
				speaker=unit
				message="Aber selbst wenn komme ich damit klar. Ob Bären, Schlangen oder Wildschweine, die machen mir alle keine Angst. Gut, Wölfe sind mir unheimlich, mit ihren heimtückischen Augen und dem gemeinen Jaulen, aber ich habe hier in der Gegend noch nie welche gesehen. Vielleicht ein paar Füchse, aber das sind ja ganz harmlo-"
			[/message]
			[message]
				caption= _ "Wolf"
				speaker=narrator
				message= _ "<span font-style='italic'>jault</span>"
				sound="wolf-growl.wav"
			[/message]
			[message]
				speaker=unit
				message="Ohh..."
			[/message]
		[/then]
	[/if]
	
	# Everyone else
	[if]
		[have_unit]
			[not]
				id=Denvan, Lenvan, Ysedda, Brealla, Ven, Johan, Gweod, Petar
			[/not]
			[filter_location]
				x={X}
				y={Y}
			[/filter_location]
		[/have_unit]
		[then]
			[message]
				speaker=unit
				message="Dies scheint mir ein gutes Versteck zu sein"
			[/message]
		[/then]
	[/if]
	
	
#enddef


    # S T O R Y
    
    [story]
        [part]
            music=battle-epic.ogg
            {WESNOTH_BIGMAP}
            story= _ "Nachdem die Korstadter ihr Dorf zurückgelassen hatten, brachen sie in Richtung Norden auf, während die Orks ihre frühere Heimat plünderten und niederbrannten. Sie reisten mehrere Tage, bevor sie bemerkten, dass ihre Widersacher sich nicht mit der Vernichtung des Dorfes zufrieden geben wollten und die Verfolgung aufgenommen hatten."
        [/part]
        [part]
            music=battle-epic.ogg
            {WESNOTH_BIGMAP}
            story= _ "Ihr spärliches Proviant und all ihr Hab und Gut zurücklassend, flohen die Vertriebenen so schnell sie ihre Beine trugen und ohne Pause. Doch je mehr Zeit verstrich, desto näher kamen ihnen ihre Verfolger, bis sie schließlich nur noch ein Fußmarsch von wenigen Stunden trennte, als sie am Rande eines Waldes ankamen, der nur spärlich durch das Nebelmeer zu erkennen war, aus dem er herausragte."
        [/part]
    [/story]
    
	# P R E S T A R T
    [event]
    	name=prestart
    	
    	{PLACE_HIDEOUT hideout_1 9 21 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_2 10 20 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_3 32 10 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_4 15 8 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_5 9 5 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_6 10 3 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_7 10 1 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_8 11 2 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_9 11 1 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_10 30 1 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_11 31 2 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_12 32 2 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_13 31 3 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_14 24 6 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_15 24 7 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_16 23 7 side=1 items/gohere.png}
    	{PLACE_HIDEOUT hideout_17 23 8 side=1 items/gohere.png}
		
		[set_variable]
			name=units_count
			value=1
		[/set_variable]
		
		[set_variable]
			name=units_hidden
			value=0
		[/set_variable]
		
    	# MAIN CHARACTERS
    	[if]
            [have_unit]
                id=Ysedda
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Ysedda
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [if]
            [have_unit]
                id=Lenvan
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Lenvan
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [if]
            [have_unit]
                id=Johan
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Johan
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
	   
	   [if]
            [have_unit]
                id=Ven
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Ven
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [if]
            [have_unit]
                id=Brealla
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Brealla
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
	    [if]
            [have_unit]
                id=Petar
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Petar
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
	    
		[if]
            [have_unit]
                id=Gweod
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Gweod
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
	    
	    [if]
            [have_unit]
                id=Clewin
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Clewin
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]

	    [if]
            [have_unit]
                id=Adhor
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Adhor
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
	    [if]
            [have_unit]
                id=Bisam
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Bisam
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
	    [if]
            [have_unit]
                id=Dehal
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Dehal
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
	    [if]
            [have_unit]
                id=Lin
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Lin
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [if]
            [have_unit]
                id=Phil
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Phil
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [if]
            [have_unit]
                id=Moran
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Moran
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [if]
            [have_unit]
                id=Bledoc
                search_recall_list=yes
            [/have_unit]
            [then]
                [recall]
            		id=Bledoc
            		show=no
        		[/recall]
        		{VARIABLE_OP units_count add 1}
            [/then]
        [/if]
        
        [objectives]
            # WINS
            [objective]
                description= _ "Find cover for everyone!"
                condition=win
            [/objective]
            
            # LOSES
    	    [objective]
        	    description= _ "Death of Denvan"
            	condition=lose
        	[/objective]
	       	[objective]
	            description= _ "Death of Ysedda"
	            condition=lose
	        [/objective]
	        [objective]
	            description= _ "Death of Johan"
	            condition=lose
	        [/objective]
	        [objective]
	            description= _ "Death of Lenvan"
	            condition=lose
	        [/objective]   
            [objective]
                [show_if]
                    [variable]
                        name=anh_canon_mode
                        equals=yes
                    [/variable]
                    [and]
                        [have_unit]
                            id=Gweod
                        [/have_unit]
                    [/and]
                [/show_if]
            	description= _ "Death of Gweod"
        	    condition=lose
            [/objective]
            [objective]
                [show_if]
                    [variable]
                        name=anh_canon_mode
                        equals=yes
                    [/variable]
                    [and]
                        [have_unit]
                            id=Ven
                        [/have_unit]
                    [/and]
                [/show_if]
                description= _ "Death of Ven"
                condition=lose
            [/objective]
            [objective]
                [show_if]
                    [variable]
                        name=anh_canon_mode
                        equals=yes
                    [/variable]
                    [and]
                        [have_unit]
                            id=Brealla
                        [/have_unit]
                    [/and]
                [/show_if]
                description= _ "Death of Brealla"
                condition=lose
            [/objective]
            [objective]
                [show_if]
                    [variable]
                        name=anh_canon_mode
                        equals=yes
                    [/variable]
                    [and]
                        [have_unit]
                            id=Petar
                        [/have_unit]
                    [/and]
                [/show_if]
                description= _ "Death of Petar"
                condition=lose
            [/objective]
            [objective]
                [show_if]
                    [variable]
                        name=anh_canon_mode
                        equals=yes
                    [/variable]
                [/show_if]
                description= _ "Death of all Town Watch members"
                condition=lose
            [/objective]

            {TURNS_RUN_OUT}
            
            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]
        [/objectives]
    [/event]

    # S I D E _ C O N F I G U R A T I O N
    
    # SIDE 1
    [side]
        side=1
        save_id=korstad
        controller=human
        recruit=Peasant, Woodsman, Ruffian
        gold=0
        income=0
        team_name=Korstad
        user_team_name= _ "Korstadter"
        {FLAG_VARIANT loyalist}
        {CHARACTER_DENVAN}
        x,y=4,26
        fog=yes
        shroud=yes
        defeat_condition=never
        # UNITS
        
        # AI
    [/side]
    
    # SIDE 2
    [side]
        side=2
        controller=ai
        gold=0
        income=0
        team_name=Orcs
        no_leader=yes
        user_team_name= _ "Chaser"
        fog=yes
        {FLAG_VARIANT ragged}
        
    [/side]
    
    # PREDIALOQUE
    [event]
        name=start

		[message]
			caption="Veomyr"
			speaker=narrator
			image=portraits/veomyr.png
			message= _ "Den nebelverdeckten Wald vor Augen erkannte Denvan die Möglichkeit, die Verfolger abzuschütteln, die sein Volk hetzten."
		[/message]
		
		[message]
			speaker=Denvan
			message= _ "Das ist unsere Chance. Da drin können wir uns verbergen und abwarten, bis sie an uns vorbeigezogen sind."
		[/message]
		
		[message]
			speaker=Lenvan
			message= _ "Das gefällt mir nicht. Wir sollten die Tarnung nutzen um ihnen eine Falle zu stellen, nicht um uns zu verstecken wie Kinder und Greise."
		[/message]
		
		[message]
			speaker=Ysedda
			message= _ "Viele von uns <span font-style='italic'>sind</span> Kinder und Greise! Wir können nicht kämpfen, nur um deinen Stolz zu befriedigen!"
		[/message]
		
		[message]
			speaker=Lenvan
			message= _ "Es geht nicht um Stolz! Wenn wir uns immer jagen lassen und uns nicht wehren, werden sie uns früher oder später vernichten!"
		[/message]
		
		[message]
			speaker=Ven
			message= _ "Ich denke, unsere glorreiche Anführerin hat Recht. Nicht jeder ist für den Kampf geeignet."
		[/message]
		
		[message]
			speaker=Denvan
			message= _ "Wenn wir eine Armee hätten, könnten wir uns ihnen hier stellen und vielleicht sogar gewinnen. Aber die meisten von uns sind keine Kämpfer. Und die, die es sind, sind erschöpft und kaum in der Lage es mit einem einzelnen Ork aufzunehmen, geschweige denn mit einer ganzen Horde"
		[/message]
		
		[message]
			speaker=Lenvan
			message= _ "Du unterschätzt unser Volk, Bruder."
		[/message]
		
		[message]
			speaker=Denvan
			message= _ "Ich beschütze unser Volk!"
		[/message]
		
		[message]
			speaker=Lenvan
			message= _ "Warum verstecken wir uns dann alle? Lass sich jene verstecken, die zu schwach zum Kämpfen sind und lass uns mit den anderen einen Hinterhalt legen! Wenn wir tatsächlich verlieren sollten, dann können die Nichtkämpfer alleine ein neues Dorf gründen."
		[/message]
		
		[message]
			speaker=Denvan
			message= _ "<span size='small' font-style='italic'>leise</span>Davon abgesehen, dass sie ein leichtes Ziel für jeden Ork, jeden Banditen, selbst jedes Rudel von Raubtieren wären, was glaubst du, wie die Orks reagieren werden, wenn wir hier gegen sie kämpfen? Glaubst du, sie werden nach ihrem Sieg friedlich abziehen? Nein! Sie werden sehen, dass wir hier sind. Sie werden folgern, dass unsere Schwachen nicht fern sind und dann werden sie den Wald durchsuchen, bis sie jeden von uns getötet haben!"
		[/message]
		
		[message]
			speaker=Denvan
			message= _ "<span size='small' font-style='italic'>laut</span> Wir teilen uns auf und verstecken uns im Wald! Verbergt euch vor den Orks mit allen Mitteln! Versteckt euch in Büschen, klettert auf Bäume, kriecht in Höhlen oder grabt euch ein, wenn es sein muss! Wenn nur einer von uns gefunden wird, kann es das Ende für uns alle bedeuten! Doch halten wir durch, sind wir die Orks endlich los und können in Frieden weiterleben. Haltet euch an diesem Gedanken fest und haltet durch! Wenn sie ihre Suche abgebrochen haben, werden wir uns hier erneut versammeln um in die Zukunft aufzubrechen!"
		[/message]   	  
    [/event]

    # ORCS ARE HERE
    [event]
    	name=turn 3
    	
    	[unit]
    		{CHARACTER_KARGA}
    		canrecruit=no
    		side=2
    		x,y= 16,22
    	[/unit]
    	
    	[unit]
    		{CHARACTER_VARAG}
    		canrecruit=no
    		side=2
    		x,y= 21,23
    	[/unit]
    	
    	{NAMED_GENERIC_UNIT 2 (Wolf Rider) 14 22 (Gurbag) ( _ "Gurbag")}
    	{NAMED_GENERIC_UNIT 2 (Wolf Rider) 15 22 (Punak) ( _ "Punak")}
    	{NAMED_GENERIC_UNIT 2 (Wolf Rider) 17 22 (Rak) ( _ "Rak")}
    	
    	#{NAMED_GENERIC_UNIT 2 (Orcish Archer) 20 23 (Huurk) ( _ "Huurk")}
    	#{NAMED_GENERIC_UNIT 2 (Orcish Archer) 22 23 (Pashnak) ( _ "Pashnak")}
    	#{NAMED_GENERIC_UNIT 2 (Orcish Archer) 23 23 (Vushnak) ( _ "Vushnak")}
    	
    	{NAMED_GENERIC_UNIT 2 (Wolf Rider) 17 24 (Vrurt) ( _ "Vrurt")}
    	{NAMED_GENERIC_UNIT 2 (Wolf Rider) 19 24 (Erirbag) ( _ "Erirbag")}
    	{NAMED_GENERIC_UNIT 2 (Wolf Rider) 20 24 (Bagar) ( _ "Bagar")}
    	
    	[set_variable]
            name=who_is_speaking
            rand=1,2
        [/set_variable]
        
        [if]
            [variable]
                name=who_is_speaking
                numerical_equals=1
            [/variable] 
            [then]          
                [message]
                    speaker=Karga
                    message= _ "Na los, sie müssen hier irgendwo sein! Sucht überall! Dreht jeden Stein um!  Hier werden wir sie endlich wiederfinden! Die Menschen sind feige und gut im Verstecken, aber wir sind Orks, wir sind großartig im Aufspüren von unserer Beute!"
                [/message]
                [message]
                    speaker=Varag
                    message= _ "<span size='small' font-style='italic'>sarkastisch</span>Großartige Ansprache. Hast du die eingeübt?"
                [/message]
            [/then]
        [/if]
        
        [if]
            [variable]
                name=who_is_speaking
                numerical_equals=2
            [/variable] 
            [then]          
                [message]
                    speaker=Varag
                    message= _ "Durchsucht den Wald! Wer auch nur einen Menschen findet signalisiert das, bevor er ihn angreift! Wenn sie hier sind, dann lassen wir sie nicht mehr entkommen!"
                [/message]
            [/then]
        [/if]
    	
    	{MODIFY_UNIT side=2 vision 3}
    	{MODIFY_UNIT (type=Wolf Rider) max_moves 6}
    	
    	[micro_ai]
            side=2
            ai_type=patrol
            action=add

            [filter]
            	id=Gurbag,Punak
            [/filter]
            
            waypoint_x=4,8,11,9,4
            waypoint_y=23,14,13,9,4
            one_time_only=no
            out_and_back=yes
            attack=X
        [/micro_ai]
        
        [micro_ai]
            side=2
            ai_type=patrol
            action=add

            [filter]
            	id=Rak, Bagar
            [/filter]
            
            waypoint_x=15,11,9,18,31
            waypoint_y=17,13,9,2,8
            one_time_only=no
            out_and_back=yes
            attack=X
        [/micro_ai]
        
        [micro_ai]
        	side=2
            ai_type=patrol
            action=add

            [filter]
            	id=Vrurt,Erirbag
            [/filter]
            
            waypoint_x=25,28,23,31,22,16,19
            waypoint_y=19,15,12,8,2,4,10
            one_time_only=no
            out_and_back=yes
            attack=X
        [/micro_ai]
    	
    	[micro_ai]
            side=2
            ai_type=hunter
            action=add

            [filter]
            	type=Orcish Archer
            [/filter]
            
            home_x,home_y=3,15
            rest_turns=2

            show_messages=yes
        [/micro_ai]
        
        [micro_ai]
            side=2
            ai_type=return_guardian
            action=add

            id=Karga
            return_x,return_y=16,22
        [/micro_ai]
        
        [micro_ai]
            side=2
            ai_type=return_guardian
            action=add

            id=Varag
            return_x,return_y=21,23
        [/micro_ai]
    [/event]
	
	# ENTDECKT SIDE 1
	[event]
		name=sighted
		first_time_only=yes
		[filter]
			side=1
		[/filter]
		[filter_second]
			side=2
		[/filter_second]
		[message]
	 		race=orc
			message= _ "<span size='small' font-style='italic'>laut</span> Sie sind hier! Ich habe sie gefunden!"
		[/message]
		[message]
	 		race=Varag
			message= _ "Sehr gut. Umstellt den Wald und treibt sie raus! Brennt ihn nieder, wenn es sein muss! Wir lassen sie nicht noch einmal entkommen!"
		[/message]
		[message]
			caption="Veomyr"
	 		race=narrator
	 		image=portraits/veomyr.png
			message= _ "Und das hätte das Ende für unser Volk bedeutet. Verstreut und umstellt hätten niemand entkommen können, wenn die Orks uns entdeckt hätten."
		[/message]
	 	[endlevel]
	 		result=defeat
		[/endlevel]
	[/event]
 	
    # All Units hidden
    [event]
        name=turn end
        first_time_only=no
        [if]
	        [variable]
	        	name=units_count
	        	numerical_equals=$units_hidden
	        [/variable]
	        [then]
	        	[modify_side]
		    		side=1
		    		fog=no
		    	[/modify_side]
		    	
	        	[message]
		        	caption="Veomyr"
		    		speaker=narrator
		    		image=portraits/veomyr.png
		    		message= _ "Die Orks suchten ausdauernd, doch die Korstadter hatten sich zu gut verborgen und so blieb den Bestien nichts anderes übrig, als weiter zu ziehen."
		    	[/message]
		    	
		    	[message]
		    		speaker=Karga
		    		message= _ "Es reicht! Sie sind nicht hier! Ich will nicht weiter suchen!"
		    	[/message]
		    	[message]
		    		speaker=Varag
		    		message= _ "Du hast Recht, sie sind uns wohl entkommen. Hoffen wir, das Morgal uns gnädig gestimmt ist. Das Dorf haben wir schließlich problemlos überrannt."
		    	[/message]
		    	[message]
		    		speaker=Karga
		    		message= _ "Wir könnten es ihm verschweigen. Viele Menschen leben wandernd."
		    	[/message]
		    	[message]
		    		speaker=Varag
		    		message= _ "Und wenn sie erwischt werden, wird Morgal sie nicht fragen, welche Orkhorde sie vertrieben hat. Du hast deine schlauen Momente, Karga."
		    	[/message]
		    	[message]
		    		speaker=Varag
		    		message= _ "<span size='small' font-style='italic'>laut</span> Alle zurück, wir brechen die Suche ab und ziehen weiter!"
		    	[/message]
		    	[message]
		        	caption="Veomyr"
		    		speaker=narrator
		    		image=portraits/veomyr.png
		    		message= _ "Und so entkamen die Korstadter den Orks endgültig. Zumindest dachten sie das."
		    	[/message]
		    	
		    	[endlevel]
		    		result=victory
		    	[/endlevel]
	        [/then]
	    [/if]    
    [/event]
    
    {ANH_LAST_BREATH}
	{ANH_DEFEATS}
[/scenario]